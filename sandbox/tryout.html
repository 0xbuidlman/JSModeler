<!--
	Author:		Kovacs Viktor
	Homepage:	http://www.kovacsv.hu
-->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	 "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>

	<meta http-equiv="content-type" content="text/html;charset=utf-8">
	<script type="text/javascript" src="../build/three.min.js"></script>
<!-- JSModeler includes start -->
	<script type="text/javascript" src="../src/core/jsm.js"></script>
	<script type="text/javascript" src="../src/core/timer.js"></script>
	<script type="text/javascript" src="../src/geometry/determinant.js"></script>
	<script type="text/javascript" src="../src/geometry/matrix.js"></script>
	<script type="text/javascript" src="../src/geometry/coord.js"></script>
	<script type="text/javascript" src="../src/geometry/coordutils.js"></script>
	<script type="text/javascript" src="../src/geometry/coordsystem.js"></script>
	<script type="text/javascript" src="../src/geometry/coordsystemutils.js"></script>
	<script type="text/javascript" src="../src/geometry/sector.js"></script>
	<script type="text/javascript" src="../src/geometry/sectorutils.js"></script>
	<script type="text/javascript" src="../src/geometry/line.js"></script>
	<script type="text/javascript" src="../src/geometry/lineutils.js"></script>
	<script type="text/javascript" src="../src/geometry/transformation.js"></script>
	<script type="text/javascript" src="../src/geometry/transformationutils.js"></script>
	<script type="text/javascript" src="../src/geometry/plane.js"></script>
	<script type="text/javascript" src="../src/geometry/planeutils.js"></script>
	<script type="text/javascript" src="../src/geometry/projection.js"></script>
	<script type="text/javascript" src="../src/geometry/convexhull.js"></script>
	<script type="text/javascript" src="../src/geometry/polygon.js"></script>
	<script type="text/javascript" src="../src/geometry/polygonutils.js"></script>
	<script type="text/javascript" src="../src/geometry/bsptree.js"></script>
	<script type="text/javascript" src="../src/modeler/body.js"></script>
	<script type="text/javascript" src="../src/modeler/bodyutils.js"></script>
	<script type="text/javascript" src="../src/modeler/adjacencylist.js"></script>
	<script type="text/javascript" src="../src/modeler/cututils.js"></script>
	<script type="text/javascript" src="../src/modeler/textureutils.js"></script>
	<script type="text/javascript" src="../src/modeler/model.js"></script>
	<script type="text/javascript" src="../src/modeler/material.js"></script>
	<script type="text/javascript" src="../src/modeler/generator.js"></script>
	<script type="text/javascript" src="../src/modeler/solidgenerator.js"></script>
	<script type="text/javascript" src="../src/modeler/camera.js"></script>
	<script type="text/javascript" src="../src/modeler/exporter.js"></script>
	<script type="text/javascript" src="../src/extras/extgenerator.js"></script>
	<script type="text/javascript" src="../src/extras/painter.js"></script>
	<script type="text/javascript" src="../src/extras/drawing.js"></script>
	<script type="text/javascript" src="../src/extras/subdivision.js"></script>
	<script type="text/javascript" src="../src/extras/svgtomodel.js"></script>
	<script type="text/javascript" src="../src/extras/csg.js"></script>
	<script type="text/javascript" src="../src/viewer/mouse.js"></script>
	<script type="text/javascript" src="../src/viewer/touch.js"></script>
	<script type="text/javascript" src="../src/viewer/converter.js"></script>
	<script type="text/javascript" src="../src/viewer/viewer.js"></script>
	<script type="text/javascript" src="../src/viewer/softwareviewer.js"></script>
<!-- JSModeler includes end -->
	<title>Example</title>

	<style>
	canvas
	{
		position:absolute;
	}
	</style>
	
	<script type="text/javascript">
		var renderers = [];
	
		MyRenderer = function ()
		{
			this.renderer = null;
			this.scene = null;
			this.camera = null;
			this.mesh = null;
		};
	
		function Update ()
		{
			var current;
			var i;
			for (i = 0; i < renderers.length; i++) {
				currentRenderer = renderers[i];
				currentRenderer.renderer.render (currentRenderer.scene, currentRenderer.camera);
				currentRenderer.mesh.rotation.z += 0.01;
			}
			requestAnimationFrame (Update);
		}
	
		function AddRenderer (width, height, i, j, clipSize)
		{
			var myRenderer = new MyRenderer ();
		
			myRenderer.renderer = new THREE.WebGLRenderer ();
			myRenderer.renderer.setSize (width, height);
			
			var domElement = myRenderer.renderer.domElement;
			domElement.style.clip = 'rect(' + (i * clipSize) + 'px, ' + ((j + 1) * clipSize) + 'px, ' + ((i + 1) * clipSize) + 'px, ' + (j * clipSize) + 'px)';
			document.body.appendChild (domElement);
			myRenderer.scene = new THREE.Scene ();
			
			myRenderer.camera = new THREE.PerspectiveCamera (45, width / height, 0.1, 10000);
			myRenderer.camera.position.set (3, 1, 2);
			myRenderer.camera.up.set (0, 0, 1);
			myRenderer.camera.lookAt (new THREE.Vector3 (0, 0, 0));

			myRenderer.scene.add (myRenderer.camera);

			var material = new THREE.MeshLambertMaterial ({
				color: 0x00cc00
			});

			var geometry = new THREE.CubeGeometry (1, 1, 1);
			myRenderer.mesh = new THREE.Mesh (geometry, material);
			myRenderer.scene.add (myRenderer.mesh);

			var directionalLight = new THREE.DirectionalLight (0xffffff);
			directionalLight.position.set (3, 1, 2).normalize ();
			myRenderer.scene.add (directionalLight);
			
			renderers.push (myRenderer);
		}
	
		function Load ()
		{
			AddRenderer (300, 300, 0, 0, 100);
			AddRenderer (300, 300, 0, 1, 100);
			AddRenderer (300, 300, 0, 2, 100);
			AddRenderer (300, 300, 1, 0, 100);
			AddRenderer (300, 300, 1, 1, 100);
			AddRenderer (300, 300, 1, 2, 100);
			AddRenderer (300, 300, 2, 0, 100);
			AddRenderer (300, 300, 2, 1, 100);

			Update ();
		}
	
	    window.onload = function ()
		{
			Load ();			
		}
	</script>

</head>

<body>
	<!-- clip:rect(0px,150px,150px,0px); -->
</body>

</html>
