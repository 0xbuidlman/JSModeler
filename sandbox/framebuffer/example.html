<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	 "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>

	<meta http-equiv="content-type" content="text/html;charset=utf-8">
	<title>Example</title>

	<script type="text/javascript" src="framebufferrenderer.js"></script>
	<script type="text/javascript">
		function Load ()
		{
			function Render ()
			{
				renderer.Render ();
			}
		
			var canvas = document.getElementById ('example');
			var renderer = new FrameBufferRenderer ();

			var fragmentShader = [
				'precision highp float;',
				'varying vec2 vVertexPosition;',
				'uniform highp float uVertexScale;',
				'uniform highp float uWidth;',
				'uniform highp float uHeight;',
				'highp int GetPixelNum (highp float position, highp float size) {',
				'	return int (floor (((position + 1.0) * size / 2.0)));',
				'}',
				'void main (void) {',
				'	highp int a = GetPixelNum (vVertexPosition.x, uWidth);',
				'	highp int b = GetPixelNum (vVertexPosition.y, uHeight);',
				'	gl_FragColor = vec4 (float (a) / 255.0, float (b) / 255.0, 0.0, 1.0);',
				'}'
			].join('\n');
			
			if (!renderer.Init (canvas, fragmentShader)) {
				var logDiv = document.getElementById ('log');
				var errors = renderer.GetErrors ();
				var i;
				for (i = 0; i < errors.length; i++) {
					logDiv.innerHTML += errors[i] + '<br>';
				}
			}
			renderer.scale = 2.0;
			Render ();
		}
	
	    window.onload = function ()
		{
			Load ();			
		}
	</script>

</head>

<body>
	<canvas id="example" width="255" height="255"></canvas>
	<div id="log"></div>
</body>

</html>
